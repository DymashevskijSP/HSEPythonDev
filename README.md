# Проект для курса по веб-разработке
## Сервис для планирования
Можем создавать встречи, добавлять людей, смотреть свои и чужие встречи и так далее(более подробный функционал появится в процессе разработки)
## текущие entry point 
 1. GET test/hello/hello_world -- возвращает {"message": "hello, world!"}
 2. POST test/hello/hello_world (Content-type: application/json, нужен параметр 'text': string) -- возвращает {"message": text}

необходимые зависимости в файлах Pipfile и Pipfile.lock
позже появится docker образ
для запуска сервера достаточно написать python manage.py runserver

В текущей конфигурации сложной бизнес-логики нет,для нее нужна база данных, поэтому ручки моковые, однако тесты на них есть уже сейчас, для их запуска надо выполнить

python -m unittest HSEPythonDev/tests/functional/<test_name> (<test_name> соответствует файлу с тестами, например test_meetings.py)
## Информация про grpc
Для запуска прото-сервера надо запустить команду python proto_sever.py
Для запуска клиента необходимо запустить команду proto_client.py
Тесты запускаются аналогично, файл grpc_test.py

## Бизнес-сценарий использования распределенных БД в этом проекте

Мы хотим хранить данные всех пользователей и их свободное время для возможности заведения встреч, а значит нам необходимо хранить
- Информацию о пользователе
  - Имя
  - Почту или никнейм
  - Организацию в которой он работает(либо список, если таких несколько)
- Запланированные встречи
  - время начала и конца
  - участники встречи
  - описание встречи 
- Информацию об организациях, пользующихся приложением
  - название
  - сотрудники организации

Таким образом, если приложение нас имеет достаточно большой RPC, и им часто пользуются, то можно распределить данные по трем основным кластерам, и в каждый положить отдельную модель

Также информацию о пользователях можно разложить по еще более мелким кластерам поскольку доступ к ней нужен часто(получаем данные при каждом просмотре страницы пользователя, которую мы, скорее всего захотим иметь)

Рассуждая о безопасности и транзакционности записи в БД
- Информация о пользователе не нуждается в изоляции

Поскольку id пользователя не изменяется, а немного устаревшее имя или логин в веб-интерфейсе не сделают ничего страшного и могут быть починены обыкновенным обновлением страницы. Главное не использовать эти данные как какой-то элемент логики программы  

- при создании встречи информация о встречах должна быть защищена на чтение, Read Commited или Repeatable Read

Не очень страшно, если во время заведения встречи занятость пользователя изменится, и, он например, окажется на другой встрече, при попытке завести встречу будет получена ошибка, и надо будет изменить время встречи, а так как встречи заводятся не так часто(а пересекаются еще реже), то подобная ошибка, как мне кажется, будет не так важна как скорость работы

- При подтверждении встречи уже транзакция должна быть изолирована Serializable
 
Чтобы не оказалось, что у пользователя дв встречи в одно и то же время, это может быть критично

- Получение информации об организациях можно тоже изолировать Serializable

Это происходит нечасто, поэтому можно пожертвовать скоростью, чтобы не запариваться с возможными проблемами, к тому же неактуальность принадлежности сотрудника к компании может быть очень важна(допустим у нас встреча на всю компанию с информацией, которая по NDA), приглашать туда сотрудников, которые уже не в компании не хочется